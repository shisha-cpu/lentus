var player,loading=!1;function checkPosition(){var c=window.innerHeight;if(window.scrollY+c>=document.body.offsetHeight-c/3&&!loading){loading=!0;var a=$(".portfolio-single").last();$("#loader").show();$.ajax({type:"GET",url:"portfolio/fetch/"+a.attr("idp").toString(),cache:!1,success:function(b){try{$("#loader").hide(),a.parent().append(b),loading=!1,portfolioDetails(),$(".pfvideo").each(function(){var a=$(this);setTimeout(function(){a.css({display:"block"})},5E3)})}catch(d){}}})}}
function portfolioDetails(){$("#pf_detail").unbind();$("#pf_detail").on("hidden.bs.modal",function(){$(".pd-photos").slick("unslick");$("#pd_photos").html("");$("#pd_geo").html("");$("#pills-photoview-tab").css({display:"none"});$("#pills-videoview-tab").css({display:"none"});$("#pills-geoview-tab").css({display:"none"});$(".nav-link, .tab-pane").removeClass("active");""!==$("#pd_video").html()&&player.dispose();$("#pd_video").html("")});$(".port_desc").unbind();$(".port_desc").on("click",function(c){c.preventDefault();
c=$(this).attr("idp");$.ajax({type:"POST",url:"portfolio/details/"+c,cache:!1,success:function(a){try{var b=JSON.parse(a);$("#pd_title").html(b.obj_location);$("#pf_detail").modal("show");a=!1;b.hasOwnProperty("photos")&&($(".nav-link, .tab-pane").removeClass("active"),$("#pills-photoview").addClass("active").addClass("show"),$("#pd_photos").html(b.photos),$("#pills-photoview-tab").css({display:"block"}).addClass("active"),photos(),a=!0);b.hasOwnProperty("video")&&($("#pd_video").html(b.video),$("#pills-videoview-tab").css({display:"block"}),
player=videojs("video"),player.fluid(!0),a||($(".nav-link, .tab-pane").removeClass("active"),$("#pills-videoview-tab, #pills-videoview").addClass("active").addClass("show"),a=!0));b.hasOwnProperty("geo")&&($("#pd_geo").html(b.geo),$("#pills-geoview-tab").css({display:"block"}),a||($(".nav-link, .tab-pane").removeClass("active"),$("#pills-geoview-tab, #pills-geoview").addClass("active").addClass("show")))}catch(d){}}})})}portfolioDetails();
function photos(){$(".pd-photos").slick({dots:!0,infinite:!0,speed:800,autoplay:!0,arrows:!0,prevArrow:'<span class="cr-slider-nav cr-slider-nav-left"><i class="icofont icofont-simple-left"></i></span>',nextArrow:'<span class="cr-slider-nav cr-slider-nav-right"><i class="icofont icofont-simple-right"></i></span>'})}(function(){window.addEventListener("scroll",checkPosition);window.addEventListener("resize",checkPosition)})(jQuery);
